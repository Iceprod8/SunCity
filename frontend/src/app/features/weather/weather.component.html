<ng-container>
  <div class="page-container pb-12">
    <div
      class="bg-[#f6f1e9] border border-amber-100 rounded-3xl shadow-xl shadow-amber-100/40 p-4 md:p-6 space-y-6"
    >
      <app-page-header
        title="Meteo"
        subtitle="Découvrez la météo du jour et des prochains jours."
      ></app-page-header>

      <div class="flex flex-col items-center justify-center">
        <div class="w-full overflow-x-auto">
          <ul
            class="inline-flex flex-nowrap gap-1.5 bg-slate-900 text-white rounded-3xl shadow-lg border border-slate-800 p-3 min-w-max"
          >
            <li *ngFor="let day of weather">
              <button
                type="button"
                class="px-2.5 py-1 text-lg font-semibold text-left rounded-2xl cursor-pointer transition-transform duration-200 hover:scale-105"
                [ngClass]="selectedWeather?.id === day.id ? 'bg-white/10 text-white' : 'text-gray-400'"
                (click)="selectWeather(day)"
              >
                {{ formattedDate(day.date) }}
              </button>
            </li>
          </ul>
        </div>

        <div class="m-3 bg-white rounded-3xl shadow p-5 border border-amber-100" *ngIf="selectedWeather">
          <p class="font-semibold text-amber-700">{{ formattedDate(selectedWeather.date) }}</p>
          <p class="text-sm text-slate-600">
            {{ conditionIcon(selectedWeather.condition) }} Mini {{ selectedWeather.min }}°C · Maxi
            {{ selectedWeather.max }}°C · Vent {{ selectedWeather.wind }} km/h
          </p>
        </div>

        <div class="m-3 flex flex-wrap gap-3 justify-center" *ngIf="selectedWeather as day">
          <div
            *ngFor="let period of day.periods"
            class="flex flex-col items-center justify-center w-56 h-60 bg-gradient-to-br from-amber-100 via-amber-50 to-amber-200 shadow-lg border border-amber-100 rounded-3xl text-center p-4"
          >
            <h1 class="font-semibold">{{ period.label }}</h1>
            <span class="text-2xl">{{ conditionIcon(period.condition) }} {{ period.temp }}°C</span>
            <p class="text-sm text-slate-600">Mini {{ day.min }}°C · Maxi {{ day.max }}°C</p>
            <p class="text-sm text-slate-600">Vent {{ period.wind }} km/h</p>
            <p class="text-xs text-slate-500">{{ period.condition }}</p>
          </div>
        </div>

        <div class="bg-white rounded-3xl shadow p-5 border border-amber-100 max-w-3xl" *ngIf="selectedWeather">
          <p>{{ selectedWeather.daily_tip }}</p>
        </div>

        <div class="text-slate-500" *ngIf="!weather.length">
          Aucune donnée météo disponible.
        </div>
      </div>
    </div>
  </div>
</ng-container>
